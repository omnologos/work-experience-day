<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Alexa Products — New & Classic</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <meta name="description" content="Explore new and classic Alexa products with an interactive scroll-driven gallery." />
    <style>
      :root{font-family:'Poppins',Arial,Helvetica,sans-serif;--bg1:#0f1724;--bg2:#13263b;--accent:#ff9900;--muted:rgba(255,255,255,0.9)}
      body{margin:0;min-height:100vh;color:#fff;background:linear-gradient(120deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}
      header{padding:18px;display:flex;justify-content:space-between;align-items:center}
      a{color:var(--muted);text-decoration:none}
      main{max-width:1100px;margin:0 auto;padding:28px}
      h1{margin:0 0 8px 0}
      #scroller-wrap{height:56vh;position:relative;overflow:hidden}
      #scroller{position:sticky;top:96px;display:flex;align-items:center;height:100%}
      #track{display:flex;gap:24px;padding:28px;will-change:transform}
      .product-card{min-width:320px;max-width:380px;border-radius:14px;padding:20px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.06));box-shadow:0 10px 30px rgba(2,6,23,0.45)}
      .product-card .card-title{font-size:1.15rem;font-weight:800;margin-bottom:6px}
      .product-card .card-sub{color:rgba(255,255,255,0.9);margin-bottom:10px}
      .product-card .card-price{font-weight:800;color:var(--accent);font-size:1.05rem}
      .product-card .card-old{margin-left:10px;text-decoration:line-through;opacity:0.7;font-weight:600}
      .overlay{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
      button{background:var(--accent);border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
      @media(max-width:640px){#scroller-wrap{height:44vh} .product-card{min-width:260px}}
    </style>
  </head>
  <body>
    <header>
      <div><a href="index.html">← Home</a></div>
      <nav><a href="alexa-details.html">Details</a> &nbsp; <a href="index.html">Summary</a></nav>
      <div style="display:flex;gap:8px;align-items:center;">
        <button id="contrast-toggle" aria-pressed="false" title="Toggle contrast" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--muted);padding:6px 8px;border-radius:8px">Contrast</button>
        <button id="text-dec" title="Decrease text" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--muted);padding:6px 8px;border-radius:8px">A-</button>
        <button id="text-inc" title="Increase text" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--muted);padding:6px 8px;border-radius:8px">A+</button>
        <label for="lang-select" style="margin-left:6px;color:var(--muted)">Lang</label>
        <select id="lang-select" aria-label="Select language" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:6px 8px;border-radius:8px">
          <option value="en">EN</option>
          <option value="es">ES</option>
        </select>
      </div>
    </header>
    <main>
      <h1 data-i18n="productsHeading">New & classic Alexa products</h1>
      <p style="color:var(--muted)" data-i18n="productsSub">Scroll down to pin the gallery and slide through products. Prices compare new vs old models.</p>

      <section id="scroller-wrap">
        <div id="scroller">
          <div id="track"></div>
        </div>
      </section>

      <div class="overlay">
        <div id="product-info"><div id="product-name" style="font-weight:700"></div><div id="product-price" style="margin-top:6px"></div></div>
        <div><button id="buy-now" data-i18n="buyBtn">Buy</button></div>
      </div>
    </main>

    <script>
      (function(){
        const products = [
          { id: 'echo_new', name: 'Echo (2025)', subtitle: 'Compact smart speaker', price: '$129', oldPrice: '$159', img: 'images/echo_new.jpg' },
          { id: 'echo_dot', name: 'Echo Dot', subtitle: 'Small & mighty', price: '$49', oldPrice: '$59', img: 'images/echo_dot.jpg' },
          { id: 'echo_old', name: 'Echo (2018)', subtitle: 'Original Echo', price: '$79', oldPrice: '$99', img: 'images/echo_old.jpg' }
        ];
        const track = document.getElementById('track');
        const scrollerWrap = document.getElementById('scroller-wrap');
        const productName = document.getElementById('product-name');
        const productPrice = document.getElementById('product-price');

        // create typographic name-cards (no images)
        products.forEach(p => {
          const card = document.createElement('div');
          card.className = 'product-card';

          const title = document.createElement('div');
          title.className = 'card-title';
          title.textContent = p.name;

          const sub = document.createElement('div');
          sub.className = 'card-sub';
          sub.textContent = p.subtitle || 'Smart speaker — voice assistant';

          const priceRow = document.createElement('div');
          const price = document.createElement('span');
          price.className = 'card-price';
          price.textContent = p.price;
          const old = document.createElement('span');
          old.className = 'card-old';
          old.textContent = p.oldPrice;
          priceRow.appendChild(price);
          priceRow.appendChild(old);

          card.appendChild(title);
          card.appendChild(sub);
          card.appendChild(priceRow);

          track.appendChild(card);
        });

        function update(){
          const trackWidth = track.scrollWidth;
          const extra = Math.max(800, trackWidth * 0.9);
          const section = document.getElementById('scroller-wrap');
          const main = document.querySelector('main');
          main.style.paddingBottom = (extra/2) + 'px';
        }
        update();

        function onScroll(){
          const section = document.getElementById('scroller-wrap');
          const rect = document.getElementById('scroller-wrap').getBoundingClientRect();
          let progress = 1 - (rect.bottom / (window.innerHeight + rect.height));
          progress = Math.min(Math.max(progress, 0), 1);
          const maxTranslate = Math.max(0, track.scrollWidth - (window.innerWidth * 0.6));
          const x = -maxTranslate * progress;
          track.style.transform = `translateX(${x}px)`;
          const index = Math.round(progress * (products.length - 1));
          const active = products[index];
          productName.textContent = active.name;
          productPrice.innerHTML = `<span style="color:var(--accent);font-weight:800">${active.price}</span> <span style="text-decoration:line-through;margin-left:10px;opacity:0.7">${active.oldPrice}</span>`;

          // scale/opacity per card based on distance to center
          const cards = Array.from(track.children);
          const centerX = window.innerWidth / 2;
          cards.forEach(card => {
            const r = card.getBoundingClientRect();
            const cardCenter = r.left + r.width/2;
            const dist = Math.abs(centerX - cardCenter);
            const maxDist = window.innerWidth * 0.6;
            const t = Math.min(dist / maxDist, 1);
            const scale = 1 + (1 - t) * 0.14; // scale up near center
            const opa = 0.5 + (1 - t) * 0.5;
            card.style.transform = `scale(${scale})`;
            card.style.opacity = opa;
          });
        }

        window.addEventListener('scroll', onScroll, { passive:true });
        window.addEventListener('resize', () => { update(); onScroll(); });
        onScroll();

        // Accessibility: contrast, text size and language (simple i18n)
        const contrastToggle = document.getElementById('contrast-toggle');
        const textInc = document.getElementById('text-inc');
        const textDec = document.getElementById('text-dec');
        const langSelect = document.getElementById('lang-select');

        const savedContrast = localStorage.getItem('highContrast') === 'true';
        const savedScale = parseFloat(localStorage.getItem('textScale') || '1');
        const savedLang = localStorage.getItem('lang') || 'en';

        function applyContrast(on){ document.body.classList.toggle('high-contrast', on); contrastToggle && contrastToggle.setAttribute('aria-pressed', on ? 'true' : 'false'); localStorage.setItem('highContrast', on ? 'true' : 'false'); }
        function applyTextScale(scale){ const base=16; document.documentElement.style.fontSize=(base*scale)+'px'; localStorage.setItem('textScale', String(scale)); }

        const i18n = {
          en:{productsHeading:'New & classic Alexa products',productsSub:'Scroll down to pin the gallery and slide through products. Prices compare new vs old models.',buyBtn:'Buy'},
          es:{productsHeading:'Productos Alexa — Nuevo y clásico',productsSub:'Desplázate para anclar la galería y ver los productos. Precios nuevos vs antiguos.',buyBtn:'Comprar'}
        };
        function applyLanguage(lang){ const dict=i18n[lang]||i18n.en; document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');if(dict[k]) el.textContent=dict[k];}); langSelect && (langSelect.value=lang); localStorage.setItem('lang', lang); }

        contrastToggle && contrastToggle.addEventListener('click', ()=>applyContrast(!document.body.classList.contains('high-contrast')));
        textInc && textInc.addEventListener('click', ()=>{ const s=Math.min(1.5, parseFloat(localStorage.getItem('textScale')||'1')+0.1); applyTextScale(s); });
        textDec && textDec.addEventListener('click', ()=>{ const s=Math.max(0.8, parseFloat(localStorage.getItem('textScale')||'1')-0.1); applyTextScale(s); });
        langSelect && langSelect.addEventListener('change', (e)=>applyLanguage(e.target.value));

        applyContrast(savedContrast); applyTextScale(savedScale); applyLanguage(savedLang);
      })();
    </script>
  </body>
</html>
